# 🎯 Kawazu CLI チャット画面デザイン

## 実際のチャット画面 (.codechat ファイル)

```
================================================================================
 File: project-meeting.codechat
================================================================================

 Room: project-meeting
 User: alice
 Max Messages: 7 (最新メッセージのみ表示)

================================================================================

▲ 古いメッセージは自動削除されます（7つまで表示）

║                                                                           ║
║┌─👨 bob ─ 10:30────────────────────────────────────────────────────────┐║
║  おはようございます！今日もよろしくお願いします 🌅                    ║
║└─────────────────────────────────────────────────────────────────────┘║
║                                                                           ║
║                                     ┌─10:31 ─ alice 👤─┐                ║
║                                       おはようございます！  ║
║                                       今日もよろしくお願いします  ║
║                                     └─────────────────┘                ║
║                                                                           ║
║┌─🐱 charlie ─ 10:32─────────────────────────────────────────────────────┐║
║  準備完了です 👍                                                          ║
║└─────────────────────────────────────────────────────────────────────┘║
║                                                                           ║
║                                     ┌─10:33 ─ alice 👤─┐                ║
║                                       昨日の件、進捗どうですか？  ║
║                                     └─────────────────┘                ║
║                                                                           ║
║┌─👨 bob ─ 10:34 💻─────────────────────────────────────────────────────┐║
║  APIの実装が完了しました！                                                ║
║  [HttpGet("api/users/{id}")]                                             ║
║  public async Task<IActionResult> GetUser(int id)                        ║
║  {                                                                       ║
║      var user = await _userService.GetUserAsync(id);                     ║
║      return Ok(user);                                                    ║
║  }                                                                       ║
║└─────────────────────────────────────────────────────────────────────┘║
║                                                                           ║
║                                     ┌─10:35 ─ alice 👤─┐                ║
║                                       素晴らしいですね！  ║
║                                       テストも通っていますか？  ║
║                                     └─────────────────┘                ║
║                                                                           ║
║┌─👨 bob ─ 10:36────────────────────────────────────────────────────────┐║
║  はい、全てのテストが通りました ✅                                       ║
║└─────────────────────────────────────────────────────────────────────┘║
║                                                                           ║

================================================================================


------------------------------------------------------------------------------>
メッセージを上の線上に書き

================================================================================
```

## カラーバージョン（実際の色付きターミナル表示）

```
================================================================================
 File: project-meeting.codechat
================================================================================

 Room: project-meeting
 User: alice
 Max Messages: 7 (最新メッセージのみ表示)

================================================================================

▲ 古いメッセージは自動削除されます（7つまで表示）

║                                                                           ║
║┌─👨 bob ─ 10:30────────────────────────────────────────────────────────┐║
║  おはようございます！今日もよろしくお願いします 🌅                    ║
║└─────────────────────────────────────────────────────────────────────┘║
║                                                                           ║
║                                     ┌─10:31 ─ alice 👤─┐                ║
║                                       おはようございます！  ║
║                                       今日もよろしくお願いします  ║
║                                     └─────────────────┘                ║
║                                                                           ║
║┌─🐱 charlie ─ 10:32─────────────────────────────────────────────────────┐║
║  準備完了です 👍                                                          ║
║└─────────────────────────────────────────────────────────────────────┘║
║                                                                           ║
║                                     ┌─10:33 ─ alice 👤─┐                ║
║                                       昨日の件、進捗どうですか？  ║
║                                     └─────────────────┘                ║
║                                                                           ║
║┌─👨 bob ─ 10:34 💻─────────────────────────────────────────────────────┐║
║  APIの実装が完了しました！                                                ║
║  [HttpGet("api/users/{id}")]                                             ║
║  public async Task<IActionResult> GetUser(int id)                        ║
║  {                                                                       ║
║      var user = await _userService.GetUserAsync(id);                     ║
║      return Ok(user);                                                    ║
║  }                                                                       ║
║└─────────────────────────────────────────────────────────────────────┘║
║                                                                           ║

================================================================================


------------------------------------------------------------------------------>
こんにちは！今から参加します

================================================================================
```

## 実際のアイコンと色分け

### ユーザーアイコン例
- alice: 👤 (水色)
- bob: 👨 (緑色)
- charlie: 🐱 (マゼンタ)
- david: 🤖 (黄色)
- emma: 👩 (赤色)

### メッセージタイプ別表示

#### 通常メッセージ（左寄せ - 他人）
```
║┌─👨 bob ─ 10:30────────────────────────────────────────────────────────┐║
║  おはようございます！今日もよろしくお願いします 🌅                    ║
║└─────────────────────────────────────────────────────────────────────┘║
```

#### 自分のメッセージ（右寄せ）
```
║                                     ┌─10:31 ─ alice 👤─┐                ║
║                                       おはようございます！  ║
║                                       今日もよろしくお願いします  ║
║                                     └─────────────────┘                ║
```

#### コードメッセージ（コード付き）
```
║┌─👨 bob ─ 10:34 💻─────────────────────────────────────────────────────┐║
║  APIの実装が完了しました！                                                ║
║  [HttpGet("api/users/{id}")]                                             ║
║  public async Task<IActionResult> GetUser(int id)                        ║
║  {                                                                       ║
║      var user = await _userService.GetUserAsync(id);                     ║
║      return Ok(user);                                                    ║
║  }                                                                       ║
║└─────────────────────────────────────────────────────────────────────┘║
```

## 入力エリア
```
================================================================================


------------------------------------------------------------------------------>
ここに新しいメッセージを入力して保存すると送信されます

================================================================================
```

## 特徴的なデザイン要素

1. **65文字幅の固定フォーマット**
2. **罫線文字（║┌─┐└─┘）を使用したボックス装飾**
3. **自分のメッセージは右寄せ、他人のメッセージは左寄せ**
4. **ユーザー毎に異なるアイコンと色**
5. **コードメッセージは💻アイコン付き**
6. **明確な境界線で区切られた入力エリア**
7. **メッセージ履歴は7つまで自動制限**

---

## CLIターミナルでの動作表示

### チャット中の様子
```bash
$ kawazu join project-meeting
✅ ルーム "プロジェクト会議" に参加しました！
📝 project-meeting.codechat をエディタで開いてチャットを開始してください
💡 終了するには Ctrl+C を押してください

👥 参加者 (3人): alice, bob, charlie
💡 ユーザー名をタップしてプロフィールを表示: kawazu profile <username>

👋 david がルームに参加しました
✏️  alice が入力中...
👤 bob のプロフィール: https://kawazu.app/profile/bob
👋 charlie がルームから退出しました
```

### ファイル共有の様子
```bash
📤 ファイル共有リクエスト
ファイル: database-schema.sql
所有者: alice
権限: 読み取り専用
有効期限: 2024-01-23 18:30:00
承認: kawazu approve abc123def
拒否: kawazu deny abc123def

✅ ファイル共有が承認されました
ファイル: database-schema.sql
承認者: bob
理由: レビュー用に共有します

📝 共有ファイルが更新されました
ファイル: database-schema.sql
更新者: alice
更新時刻: 2024-01-23 14:45:22
```

---

## 便利なコマンド例

### 現在のユーザー確認
```bash
$ kawazu whoami
👤 現在のユーザー: alice
📧 メール: alice@example.com
🏷️  プラン: Pro
🆔 ユーザーID: user_123abc
```

### 設定確認
```bash
$ kawazu config --show
⚙️  現在の設定:
├── サーバーURL: https://kawazu.onrender.com
├── デフォルトユーザー名: alice
├── 認証状態: ✅ ログイン済み
└── 設定ファイル: ~/.kawazu/config.json
```

### ファイル一覧
```bash
$ kawazu list
📁 ローカルのチャットファイル一覧:
├── project-meeting.codechat (最終更新: 2時間前)
├── daily-standup.codechat (最終更新: 1日前)
└── code-review.codechat (最終更新: 3日前)
```

### 共有ファイル一覧
```bash
$ kawazu files
📁 共有されているファイル:
├── database-schema.sql (alice) - 読み取り専用
├── api-docs.md (bob) - 読み書き可能
└── config.json (charlie) - 読み取り専用
```

---

## エラーハンドリング

### 認証エラー
```bash
$ kawazu join private-room
🔍 認証状態を確認中...
❌ サーバー接続に失敗しました
接続エラー: unauthorized
 認証エラーが発生しました。再ログインが必要です。
 ログイン: kawazu login
```

### パスワード必須エラー
```bash
$ kawazu join private-room
❌ Password required for private room
💡 プライベートルームの場合は -p オプションでパスワードを指定してください
例: kawazu join room-name -p password
```

---

## 実際の使用例

### 新しいルーム作成
```bash
$ kawazu create "新機能開発会議"
✅ ルーム "新機能開発会議" を作成しました！
🔗 ルームID: new-feature-dev-meeting
📝 new-feature-dev-meeting.codechat をエディタで開いてチャットを開始してください
💡 終了するには Ctrl+C を押してください

👥 参加者 (1人): alice
```

### プライベートルーム参加
```bash
$ kawazu join secret-project -p mypassword
✅ ルーム "秘密プロジェクト" に参加しました！
🔒 このルームはプライベートです
📝 secret-project.codechat をエディタで開いてチャットを開始してください
```

### 終了
```bash
^C
💭 チャットを終了しています...
👋 ありがとうございました！
```

---

## 特徴

- **リアルタイム**: `.codechat` ファイルを保存すると即座にメッセージが送信される
- **エディタ連携**: 普段使っているエディタでチャットができる
- **ファイル共有**: プロジェクトファイルを安全に共有・承認制
- **認証**: セキュアなログイン機能
- **カラフル**: 見やすいカラー出力
- **多言語対応**: 日本語インターフェース

---

*このMarkdownは実際のKawazu CLIの動作を再現したものです。* 